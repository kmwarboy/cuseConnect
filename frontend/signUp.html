<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link rel="shortcut icon" type="image/x-icon" href="../images/favicon.ico" />
    <title>Sign Up | Cuse Connect</title>
    <link rel="stylesheet" href="../css/normalize.css" />
    <link rel="stylesheet" href="../css/style.css" />
    <link href="https://fonts.googleapis.com/css?family=Domine|Lato:400,700&display=swap" rel="stylesheet">
  </head>
  <body>
    <header class="logoHeader">
      <img
        src="../images/cuseConnect.svg"
        id="orangeLogo"
        alt="orange cuse connect logo"
      />
    </header>
    <div class="tagLine">
      <h2>
        join the community!
      </h2>
    </div>
    <nav>
      <div class="linkContainer">
        <a href="./index.html" class="navLinks">Login</a>
        <a href="./about.html" class="navLinks">About</a>
      </div>
    </nav>
    <main>
        <div class="formBox">
            <form class="inputForm" onsubmit="newUser(event)">
                <div>
                    <label for="name" >Full Name:</label>
                    <input type="text" id="name" />
                </div>
                <div>
                    <label for="userName">Username:</label>
                    <input type="text" id="userName"/>
                </div>
                <div>
                  <label for="password">Password:</label>
                  <input type="password" id="password" />
                </div>
                <div>
                    <label for="houseNumber">House Number:</label>
                    <input type="text" id="houseNumber"/>
                </div>
                <div>
                    <label for="streetName">Street Name:</label>
                    <input type="text" id="streetName"/>
                </div>
                <div>
                    <button class="submit">Create Account</button>
                </div>
            </form>
        </div>
      </form>
    </main>
  </body>
<!--start js below to get information from input fields to database-->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script>


  function newUser(event) {
    event.preventDefault();

    const name = $("#name").val();
		const userName = $("#userName").val();
    const password = $("#password").val();
    const houseNumber = $("#houseNumber").val();
    const streetName = $("#streetName").val();


    fetch("/user", {
					method: "PUT",
					headers: {
						"Content-Type": "application/json"
					},
					body: JSON.stringify({ name, userName, password, houseNumber, streetName })
				})
					.then(rawJSON => {
						return rawJSON.json();
					})
					.then(data => {
            console.log(data);
            alert("Account created successfully!");
            location.href ='index.html';
          });
          
          $('input[type="text"]').val('');

  }

</script>

</html>
